{"version":3,"sources":["webpack://canvas-scale/webpack/universalModuleDefinition","webpack://canvas-scale/webpack/bootstrap","webpack://canvas-scale/./node_modules/current-script-polyfill/currentScript.js","webpack://canvas-scale/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://canvas-scale/./lib/scale.js","webpack://canvas-scale/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","document","currentScript","scripts","getElementsByTagName","Error","err","res","exec","stack","src","readyState","window","match","default_conf","height","start","end","unit","capacity","background","midLineColor","scaleLineColor","openUnitChange","sign","fontColor","fontSize","dpr","devicePixelRatio","slowActionfn","b","Scale","container","options","callBack","_id","Math","random","toString","substring","toUpperCase","_container","_config","assign","_callBack","_canvas","createElement","_ctx","getContext","appendChild","_canvas_bg","_ctx_bg","current_def","_ifError","init","el","querySelector","console","warn","scale","$_init","constructor","opt","Number","isNaN","error","def","floor","width","cssWidth","getBoundingClientRect","style","beginPath","font","fillStyle","textAlign","fillText","closePath","$_drawScale","$_drawSign","$_drawMidLine","$_addEvent","log","begin_num","cur_x","cur_num","scale_len","ceil","real_len","fillRect","moveTo","lineTo","strokeStyle","lineWidth","stroke","space_num","space_x","shadowBlur","shadowColor","drawImage","mid_x","fill","gradient1","createLinearGradient","addColorStop","gradient","$_moveDraw","begin_x","last_x","ifMove","from_def","lastMoveTime","lastMove_x","e","stopPropagation","preventDefault","touches","pageX","timeStamp","Date","now","move","current_x","move_x","requestAnimationFrame","nowTime","changedTouches","v","step","round","abs","hasTouch","startEvent","moveEvent","endEvent","addEventListener","clearRect","update","_point_x","resize","clear","removeChild"],"mappings":"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","file":"canvas-scale.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"canvas-scale\"] = factory();\n\telse\n\t\troot[\"canvas-scale\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","// document.currentScript polyfill by Adam Miller\n\n// MIT license\n\n(function(document){\n  var currentScript = \"currentScript\",\n      scripts = document.getElementsByTagName('script'); // Live NodeList collection\n\n  // If browser needs currentScript polyfill, add get currentScript() to the document object\n  if (!(currentScript in document)) {\n    Object.defineProperty(document, currentScript, {\n      get: function(){\n\n        // IE 6-10 supports script readyState\n        // IE 10+ support stack trace\n        try { throw new Error(); }\n        catch (err) {\n\n          // Find the second match for the \"at\" string to get file src url from stack.\n          // Specifically works with the format of stack traces in IE.\n          var i, res = ((/.*at [^\\(]*\\((.*):.+:.+\\)$/ig).exec(err.stack) || [false])[1];\n\n          // For all scripts on the page, if src matches or if ready state is interactive, return the script tag\n          for(i in scripts){\n            if(scripts[i].src == res || scripts[i].readyState == \"interactive\"){\n              return scripts[i];\n            }\n          }\n\n          // If no match, return null\n          return null;\n        }\n      }\n    });\n  }\n})(document);\n","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    require('current-script-polyfill')\n  }\n\n  var i\n  if ((i = window.document.currentScript) && (i = i.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/))) {\n    __webpack_public_path__ = i[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","// 默认配置\nconst default_conf = {\n  // width: '',  // 不支持设置，取容器宽度\n  height: 50, // 画布高度\n  start: 1000, // 刻度开始值\n  end: 10000, // 刻度结束值\n  // def: 100, // 中心线停留位置 刻度值\n  unit: 10, // 刻度间隔 'px'\n  capacity: 100, // 刻度容量值\n  background: '#fff', // 设置颜色则背景为对应颜色虚幻效果，不设置默认为透明色。\n  midLineColor: '#087af7', // 中心线颜色\n  scaleLineColor: '#999', // 刻度线颜色\n  openUnitChange: true, // 是否开启间隔刻度变更\n  sign: '@nowThen', // 签名，传入空不显示签名\n  fontColor: '#68ca68', // 刻度数值颜色， 刻度线颜色暂未提供设置\n  fontSize: '16px SimSun, Songti SC', // 刻度数值 字体样式\n};\nconst dpr = window.devicePixelRatio; // 获取dpr\nconst slowActionfn = function (t, b, c, d) {\n  // return -c * ((t = t/d - 1) * t * t*t - 1) + b;\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n};\n\nfunction Scale(container, options, callBack) {\n  this._id = `scale-${Math.random().toString(36).substring(2, 9).toUpperCase()}`;\n  // canvas容器\n  this._container = container;\n  this._config = Object.assign(default_conf, options);\n  this._callBack = callBack;\n\n  this._canvas = document.createElement('canvas');\n  this._ctx = this._canvas.getContext('2d');\n  this._canvas._id = this._id;\n  this._container.appendChild(this._canvas);\n\n  this._canvas_bg = null;\n  this._ctx_bg = null;\n\n  this.current_def = 0; // 当前刻度\n  this._ifError = false;\n\n  // this.$_init();\n}\n\nScale.prototype.constructor = Scale;\n\nScale.prototype.$_init = function (opt) {\n  const {\n    _config,\n    _container,\n    _canvas,\n    _ctx\n  } = this;\n  this._ifError = false;\n  if (opt) {\n    _config = Object.assign(_config, opt);\n  }\n  _config.height = Number(_config.height);\n  _config.start = Number(_config.start);\n  _config.end = Number(_config.end);\n  _config.unit = Number(_config.unit);\n  _config.capacity = Number(_config.capacity);\n  if (isNaN(_config.height)) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:height」参数必须是有效数字');\n  }\n  if (isNaN(_config.start)) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:start」参数必须是有效数字');\n  }\n  if (isNaN(_config.end)) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:end」参数必须是有效数字');\n  }\n  if (isNaN(_config.unit)) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:unit」参数必须是有效数字');\n  }\n  if (isNaN(_config.capacity)) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:capacity」参数必须是有效数字');\n  }\n  if (_config.start > _config.end) {\n    this._ifError = true;\n    console.error('【scale】传入的「options:end」参数值不能小于「options:end」参数值');\n  }\n\n  // 设置中间线位置\n  if (!_config.def) {\n    this.current_def = Math.floor(((_config.end - _config.start) / 2 + _config.start) / _config.capacity) * _config.capacity;\n  } else if (_config.def < _config.start) {\n    this.current_def = _config.start - _config.capacity;\n  } else if (_config.def > _config.end) {\n    this.current_def = _config.end + _config.capacity;\n  }\n\n  // 获取css的宽高\n  const {\n    width: cssWidth\n  } = _container.getBoundingClientRect();\n\n  // 设置容器宽高\n  _config.width = Math.floor(cssWidth);\n  _config.height = Math.floor(_config.height);\n  // 根据dpr，设置canvas宽高\n  _canvas.style.width = `${_config.width}px`;\n  _canvas.style.height = `${_config.height}px`;\n  _canvas.width = dpr * _config.width; // 确保canvas宽高为整数\n  _canvas.height = dpr * _config.height;\n\n  // 画布坐标根据 dpr 缩放 ，解决移动端模糊问题\n  _ctx.scale(dpr, dpr);\n\n  if (this._ifError) {\n    _ctx.beginPath();\n    _ctx.font = '12px Arial';\n    _ctx.fillStyle = 'red';\n    _ctx.textAlign = 'center';\n    _ctx.fillText('传入参数有误，渲染异常...', _config.width / 2, _config.height / 2);\n    _ctx.closePath();\n    _ctx.fillStyle = 'transparent';\n    return;\n  }\n\n  this.$_drawScale(); // 刻度尺\n  this.$_drawSign(); // 设置签名及背景色\n  this.$_drawMidLine(); // 中间线\n  this.$_addEvent(); // 增加事件监听\n}\n\n// 绘制刻度尺\nScale.prototype.$_drawScale = function () {\n  const {\n    _config,\n    _ctx\n  } = this;\n  // 创建新的刻度画布 作为底层图片\n  const _canvas_bg = this._canvas_bg = document.createElement('canvas');\n  const _ctx_bg = this._ctx_bg = _canvas_bg.getContext('2d');\n  // 设置canvas_bg宽高\n  _canvas_bg.width = _config.width * dpr;\n  _canvas_bg.height = _config.height * dpr;\n  _ctx_bg.scale(dpr, dpr);\n\n  // 以中点刻度为基准，获取最左侧刻度值\n  console.log(this.current_def);\n  let begin_num = this.current_def - (_config.width / 2) * (_config.capacity / _config.unit);\n  let cur_x = 0;\n  let cur_num = 0;\n  const scale_len = Math.ceil((_config.width + 1) / _config.unit); // 刻度条数\n  const real_len = Math.ceil((_config.end - _config.start + 1) / _config.capacity); // 实际可绘制的刻度条数\n\n  _ctx_bg.fillStyle = _config.background || 'transparent'; // 背景色\n  _ctx_bg.fillRect(0, 0, _config.width, _config.height);\n  _ctx_bg.closePath();\n  // 底线\n  _ctx_bg.beginPath();\n  _ctx_bg.moveTo(0, _config.height);\n  _ctx_bg.lineTo(_config.width, _config.height);\n  _ctx_bg.strokeStyle = _config.scaleLineColor || '#9E9E9E';\n  _ctx_bg.lineWidth = 1;\n  _ctx_bg.stroke();\n  _ctx_bg.closePath();\n\n  let space_num = Math.ceil(begin_num / _config.capacity) * _config.capacity - begin_num;\n  let space_x = space_num * (_config.unit / _config.capacity);\n\n  // 绘制刻度线\n  for (let i = 0; i < scale_len; i++) {\n    cur_num = (Math.ceil(begin_num / _config.capacity) + i) * _config.capacity;\n    if (cur_num < _config.start) {\n      continue;\n    } else if (cur_num > _config.end) {\n      break;\n    }\n\n    _ctx_bg.beginPath();\n    _ctx_bg.strokeStyle = _config.scaleLineColor || \"#9E9E9E\";\n    _ctx_bg.font = _config.fontSize;\n    _ctx_bg.fillStyle = _config.fontColor;\n    _ctx_bg.textAlign = 'center';\n    _ctx_bg.shadowBlur = 0;\n    cur_x = space_x + i * _config.unit;\n\n    if (cur_num % (_config.capacity * 10) === 0) {\n      _ctx_bg.moveTo(cur_x, (_config.height * 1) / 2);\n      _ctx_bg.strokeStyle = _config.scaleLineColor || \"#666\";\n      _ctx_bg.shadowColor = '#9e9e9e';\n      _ctx_bg.shadowBlur = 1;\n      _ctx_bg.fillText(\n        cur_num,\n        cur_x,\n        (_config.height * 1) / 3\n      );\n    } else if (cur_num % (_config.capacity * 5) === 0) {\n      _ctx_bg.moveTo(cur_x, (_config.height * 2) / 3);\n      _ctx_bg.strokeStyle = _config.scaleLineColor || \"#888\";\n      if (real_len <= 10) {\n        _ctx_bg.font = '12px Helvetica, Tahoma, Arial';\n        _ctx_bg.fillText(\n          cur_num,\n          cur_x,\n          (_config.height * 1) / 2\n        );\n      }\n    } else {\n      _ctx_bg.moveTo(cur_x, (_config.height * 4) / 5);\n    }\n    _ctx_bg.lineTo(cur_x, _config.height);\n    _ctx_bg.stroke();\n    _ctx_bg.closePath();\n  }\n  _ctx.drawImage(_canvas_bg, 0, 0, _config.width * dpr, _config.height * dpr, 0, 0, _config.width, _config.height);\n}\n\n// 绘制中心线\nScale.prototype.$_drawMidLine = function () {\n  const {\n    _config,\n    _ctx\n  } = this;\n\n  const mid_x = Math.floor(_config.width / 2);\n  _ctx.beginPath();\n  _ctx.fillStyle = _config.midLineColor || '#087af7';\n  _ctx.fillRect(mid_x - 1, 0, 2, _config.height);\n  _ctx.stroke();\n  _ctx.moveTo(mid_x, 8);\n  _ctx.lineTo(mid_x - 5, 2);\n  _ctx.lineTo(mid_x - 5, 0);\n  _ctx.lineTo(mid_x + 5, 0);\n  _ctx.lineTo(mid_x + 5, 2);\n  _ctx.fill();\n  _ctx.moveTo(mid_x, _config.height - 8);\n  _ctx.lineTo(mid_x - 5, _config.height - 2);\n  _ctx.lineTo(mid_x - 5, _config.height);\n  _ctx.lineTo(mid_x + 5, _config.height);\n  _ctx.lineTo(mid_x + 5, _config.height - 2);\n  _ctx.fill();\n  _ctx.closePath();\n}\n\n// 设置签名及背景\nScale.prototype.$_drawSign = function () {\n  const {\n    _ctx,\n    _config\n  } = this;\n  // 背景\n  if (_config.background) {\n    _ctx.beginPath();\n    const gradient1 = _ctx.createLinearGradient(0, 0, _config.width, 0);\n    gradient1.addColorStop(0, 'rgba(255, 255, 255, 0.95)');\n    gradient1.addColorStop(0.45, 'rgba(255, 255, 255, 0)');\n    gradient1.addColorStop(0.55, 'rgba(255, 255, 255, 0)');\n    gradient1.addColorStop(1, 'rgba(255, 255, 255, 0.95)');\n    _ctx.fillStyle = gradient1;\n    _ctx.fillRect(0, 0, _config.width, _config.height);\n    _ctx.closePath();\n  }\n\n  // 签名\n  if (_config.sign) {\n    _ctx.beginPath();\n    _ctx.font = '10px Arial';\n    const gradient = _ctx.createLinearGradient(_config.width, 0, _config.width - 50, 0);\n    gradient.addColorStop(0, 'rgba(255, 0, 0, 0.3)');\n    gradient.addColorStop(1, 'rgba(0, 128, 0, 0.3)');\n    _ctx.fillStyle = gradient;\n    _ctx.textAlign = 'right';\n    _ctx.fillText(_config.sign, _config.width - 10, 10);\n    _ctx.closePath();\n    _ctx.fillStyle = 'transparent';\n  }\n}\n\n// 事件交互\nScale.prototype.$_addEvent = function () {\n  let {\n    _canvas,\n    _config,\n    $_moveDraw\n  } = this;\n  let begin_x = 0; // 手指x坐标\n  let last_x = 0; //上一次x坐标\n  let ifMove = false; // 是否开始交互\n  let from_def = 0;\n\n  let lastMoveTime = 0;\n  let lastMove_x = 0;\n\n  const start = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    ifMove = true;\n    if (!e.touches) {\n      last_x = begin_x = e.pageX;\n    } else {\n      last_x = begin_x = e.touches[0].pageX;\n    }\n    lastMove_x = last_x;\n    lastMoveTime = e.timeStamp || Date.now();\n  }\n\n  const move = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const current_x = e.touches ? e.touches[0].pageX : e.pageX;\n    if (ifMove) {\n      const move_x = current_x - last_x;\n      this.current_def = this.current_def - move_x * (_config.capacity / _config.unit);\n      window.requestAnimationFrame($_moveDraw.bind(this));\n      // moveDraw();\n\n      last_x = current_x;\n      const nowTime = e.timeStamp || Date.now();\n      if (nowTime - lastMoveTime > 300) {\n        lastMoveTime = nowTime;\n        lastMove_x = last_x;\n      }\n    }\n  }\n\n  const end = (e) => {\n    const current_x = e.changedTouches ? e.changedTouches[0].pageX : e.pageX;\n    const nowTime = e.timeStamp || Date.now();\n    const v = -(current_x - lastMove_x) / (nowTime - lastMoveTime); // 手指划动速度\n    const step = () => {\n      this.current_def = slowActionfn(t, from_def, (_config.capacity) * v * 50, d);\n      if (this.current_def < _config.start) {\n        this.current_def = _config.start;\n      } else if (this.current_def > _config.end) {\n        this.current_def = _config.end;\n      }\n      if (_config.openUnitChange) {\n        this.current_def = Math.round(this.current_def / _config.capacity) * _config.capacity;\n      }\n      this.$_moveDraw();\n      t++;\n      if (t <= d) {\n        // 继续运动\n        window.requestAnimationFrame(step);\n      } else {\n        // 结束\n      }\n    }\n\n    ifMove = false;\n\n    let t = 0, d = 15;\n    if (Math.abs(v) >= 0.3) {\n      from_def = this.current_def;\n      step();\n    } else {\n      if (this.current_def < _config.start) {\n        this.current_def = _config.start;\n      } else if (this.current_def > _config.end) {\n        this.current_def = _config.end;\n      }\n      if (_config.openUnitChange) {\n        this.current_def = Math.round(this.current_def / _config.capacity) * _config.capacity;\n      }\n      this.$_moveDraw();\n    }\n  }\n  // 注册事件，移动端和PC端\n  const hasTouch = 'ontouchstart' in window;\n  const startEvent = hasTouch ? 'touchstart' : 'mousedown';\n  const moveEvent = hasTouch ? 'touchmove' : 'mousemove';\n  const endEvent = hasTouch ? 'touchend' : 'mouseup';\n  _canvas.addEventListener(startEvent, start);\n  _canvas.addEventListener(moveEvent, move);\n  _canvas.addEventListener(endEvent, end);\n}\n\nScale.prototype.$_moveDraw = function () {\n  const {\n    _ctx,\n    _config\n  } = this;\n  _ctx.clearRect(0, 0, _config.width, _config.height);\n\n  this.$_drawScale();\n  this.$_drawMidLine();\n  this.$_drawSign();\n\n  if (typeof this._callBack === 'function') {\n    // console.log(value);\n    this._callBack(Math.round(this.current_def));\n  } else {\n    throw new Error('scale函数的第二个参数，必须为正确的回调函数！')\n  }\n}\n\nScale.prototype.update = function (value) {\n  this._point_x = (value - this._config.start) / this._config.capacity * this._config.unit; // 初始化开始位置\n  this.$_moveDraw();\n}\nScale.prototype.resize = function (opt) {\n  // this.clear();\n  this.$_init(opt);\n}\nScale.prototype.clear = function (value) {\n  if (this._container && this._canvas) {\n    this._container.removeChild(this._canvas);\n    this._container = null;\n    this._canvas = null;\n  }\n}\n\n// 初始化\nfunction init(el, options, callBack) {\n  const container = document.querySelector(el);\n  if (!container) {\n    throw new Error('【scale】传入的「el」参数必须是有效的HTML容器节点！')\n  }\n  if (typeof callBack !== 'function') {\n    console.warn('【scale】传入的「callBack」参数不是有效的回调函数！')\n  }\n\n  const scale = new Scale(container, options, callBack);\n\n  scale.$_init();\n\n  return scale;\n}\n\nexport default {\n  init\n}\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}